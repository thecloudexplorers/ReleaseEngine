resources:
  repositories:
  - repository: ReleaseEngine
    type: github
    endpoint: thecloudexplorers
    name: thecloudexplorers/ReleaseEngine
    ref: users/wcamargo/new-structure

trigger:
  branches:
    include:
    - users/wcamargo/*
  # paths:
  #   include:
  #     - templates/workloads/platform/identity-access-management/tenant-iam-setup
            
pool:
  vmImage: 'windows-latest'

extends: 
  template: /pipelines/01-workloads/alz.platform.workload.yml@ReleaseEngine
  parameters:
    workloadSettings:
      configurationFilePath: /templates/workloads/platform/identity-access-management/tenant-iam-setup/tests/_config
      environments:
        - dev
      # - prd
      deploymentScript:
        - name: Get-EnvironmentVariables.ps1
          # arguments: -Argument1 "value" -Argument2 "value"
        # - name: Set-BreakGlassAccount.ps1
        #   arguments: -Argument1 "value" -Argument2 "value"